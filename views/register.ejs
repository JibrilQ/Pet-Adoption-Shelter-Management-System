<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Pet Adoption & Shelter Management</title>
    <link rel="stylesheet" href="/stylesheet/style.css">
</head>
<body class = "login-page">
    <%- include('reuseable/header') %>

    <main>
        <section class="login-card">
            <h2 id="register-heading"> Create a new account! </h2>

            <%# Error Display Logic %>
            <% if (locals.error) { 
                let message = '';
                <%# flag check %>
                if (error === 'password_mismatch') {
                    message = 'Please make sure your passwords are matched';
                } else if (error === 'email_exists') {
                    message = 'Email already registered';
                } else {
                    message = 'Server Error has occured';
                }
            %>
                <p role="alert">
                    <strong> Error! </strong> <%= message %>
                </p>
            <% } %>

            <p class="login-intro">
                Create an adopter or shelter account to access and manage applications and to keep pet profiles updated.
            </p>

            <form action="/register" method="POST">
                <label for="register-name">Full Name</label>
                <input type="text" id="register-name" name="name" required />

                <label for="register-email"> Email </label>
                <input type="email" id="register-email" name="email" required />

                <label for="register-phone"> Phone Number (Optional) </label>
                <input type="tel" id="register-phone" name="phone" required />

                <label for="register-city"> City (Optional) </label>
                <input type="text" id="register-city" name="city" />

                <label for="register-password"> Password </label>
                <input type="password" id="register-password" name="password" required/>

                <label for="register-password-confirm"> Confirm Password </label>
                <input
                    type="password"
                    id="register-password-confirm"
                    name="password_confirm"
                    required
                />

                <fieldset class="role-select">
                    <legend> Register as...</legend>
                    <label>
                        <input type="radio" name="role" value="adopter" required /> Adopter 
                    </label>

                    <label>
                    <input type ="radio" name="role" value="shelter" required /> Shelter
                    </label>
                </fieldset>

                <button type="submit"> Create Account </button>

                <p class="register-link">
                    Already have an account? <a href="/login"> Log in! </a>
                </p>
            </form>
        </section>
    </main>

    <%- include('reuseable/footer') %>

    
</body>
</html>